#cloud-config
autoinstall:
  version: 1
# bootcmd:
#   - echo 192.168.1.1 sv-ubuntu.workgroup sv-ubuntu > /etc/hosts
  identity:
    hostname: sv-ubuntu.workgroup
    realname: Master
    username: master
    password: "$6$rBCZT84E9aJgVKuJ$53LaBfRk7uuexIfi1hGZCS575zZlgsqmliIlMIqiMqX.gFw9kNIeyPjpu5OUw7TmQLSs/.0VI..M.rWKdExaE0"
#   password = "master"
  locale: ja_JP.UTF-8
  keyboard:
    layout: jp
  refresh-installer:
    update: yes
    channel: edge
  network:
    network:
      version: 2
      ethernets:
        ens160:
          dhcp4: false
          addresses:
            - 192.168.1.1/24
          gateway4: 192.168.1.254
          nameservers:
            addresses:
              - 192.168.1.254
  package_update: true
  package_upgrade: true
  packages:
    - standard^
    - server^
    - openssh-server^
    - dns-server^
    - samba-server^
    - ubuntu-desktop^
#   - ubuntu-desktop-default-languages^
    - sudo
    - tasksel
    - isc-dhcp-server
    - apache2
    - vsftpd
    - ntpdate
    - clamav
    - cifs-utils
    - nfs-common
    - nfs-kernel-server
    - smbclient
    - dnsutils
    - ibus-mozc
    - inxi
    - rsync
    - desktop-base
    - network-manager
    - language-pack-ja
    - language-pack-ja-base
    - language-pack-gnome-ja
    - fonts-noto-cjk-extra
    - mozc-utils-gui
    - gnome-user-docs-ja
    - gnome-getting-started-docs-ja
    - firefox-locale-ja
    - thunderbird-locale-ja
    - libreoffice-l10n-ja
    - libreoffice-help-ja
    - chromium-browser
    - chromium-browser-l10n
# snap:
#   commands:
#     00: snap install chromium
# filesystem:
#   guided: yes
#   guided-method: lvm
#   guided-index: 0
  storage:
#   layout:
#     name: lvm
    config:
      - {ptable: gpt, path: /dev/sda,  wipe: superblock,                        preserve: false, name: '', grub_device: false, type: disk,          id: disk-sda}
      - {device: disk-sda, size: 512M, wipe: superblock, flag: boot, number: 1, preserve: false,           grub_device: true,  type: partition,     id: partition-0}
      - {device: disk-sda, size:   1G, wipe: superblock, flag: '',   number: 2, preserve: false,                               type: partition,     id: partition-1}
      - {device: disk-sda, size:   -1, wipe: superblock, flag: '',   number: 3, preserve: false,                               type: partition,     id: partition-2}
      - {name: ubuntu-vg, devices: [partition-2],                               preserve: false,                               type: lvm_volgroup,  id: lvm_volgroup-0}
      - {name: ubuntu-lv, volgroup: lvm_volgroup-0, size: +100%,                preserve: false,                               type: lvm_partition, id: lvm_partition-0}
      - {fstype: fat32, volume: partition-0,                                    preserve: false,                               type: format,        id: format-0}
      - {fstype: ext4,  volume: partition-1,                                    preserve: false,                               type: format,        id: format-1}
      - {fstype: ext4,  volume: lvm_partition-0,                                preserve: false,                               type: format,        id: format-2}
      - {device: format-0, path: /boot/efi,                                                                                    type: mount,         id: mount-0}
      - {device: format-1, path: /boot,                                                                                        type: mount,         id: mount-1}
      - {device: format-2, path: /,                                                                                            type: mount,         id: mount-2}
  user-data:
    timezone: Asia/Tokyo
