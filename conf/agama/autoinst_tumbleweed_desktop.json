{
  "localization": {
    "language": "ja_JP.UTF-8",
    "keyboard": "jp",
    "timezone": "Asia/Tokyo"
  },
  "product": {
    "id": "openSUSE_Leap"
  },
  "root": {
    "password": "r00t",
    "hashedPassword": false
  },
  "user": {
    "userName": "master",
    "fullName": "Master",
    "password": "master",
    "hashedPassword": false
  },
  "scripts": {
    "pre": [
      {
        "name": "zzz_pre.sh",
        "content": "#!/bin/sh\n_COMD_LINE=\"$(cat /proc/cmdline || true)\"\nfor __LINE in ${_COMD_LINE:-}\ndo\n  case \"${__LINE}\" in\n    debug=*   ) debug=\"${__LINE#debug=}\"   ; export debug;;\n    debugout=*) debugout=\"${__LINE#debug=}\"; export debugout;;\n    *) ;;\n  esac\ndone\nmkdir -p /var/admin/autoinst/\n{\n  if [ -n \"${debug:-}\" ] || [ -n \"${debugout:-}\" ]; then\n    set -x\n    export -p\n  fi\n  _FILE_SEED=\"\"\n  _COMD_LINE=\"$(cat /proc/cmdline || true)\"\n  for __LINE in ${_COMD_LINE:-}\n  do\n    case \"${__LINE}\" in\n      preseed/url=*  | url=*  ) _FILE_SEED=\"${__LINE#*url=}\";;\n      preseed/file=* | file=* ) _FILE_SEED=\"${__LINE#*file=}\";;\n      ds=nocloud*             ) _FILE_SEED=\"${__LINE#*ds=nocloud*=}\";_FILE_SEED=\"${_FILE_SEED%%/}/user-data\";;\n      inst.ks=*               ) _FILE_SEED=\"${__LINE#*inst.ks=}\";;\n      autoyast=*              ) _FILE_SEED=\"${__LINE#*autoyast=}\";;\n      inst.auto=*             ) _FILE_SEED=\"${__LINE#*inst.auto=}\";;\n      *) ;;\n    esac\n  done\n  __DIRS=\"${_FILE_SEED%/user-data}\"\n  __DIRS=\"${__DIRS%/*/*}\"\n  __DIRS=\"${__DIRS%%/}\"\n  cd /var/admin/autoinst/ || exit 1\n  echo \"download/copy: [${__DIRS:-}]\"\n  case \"${__DIRS:-}\" in\n    http:*|https:*|ftp:*|tftp:*) curl -L -# -O -R -S \"${__DIRS:-}/script/autoinst_cmd_early.sh\";;\n    nfs:*                      ) ;;\n    hd:sr0:*|cdrom|cdrom:*     ) cp -p \"/mnt/install/repo/${__DIRS#*:/}/script/autoinst_cmd_early.sh\" ./;;\n        hd:*|dvd:*|cd:*            ) cp -p \"/run/initramfs/live/${__DIRS#*:/}/script/autoinst_cmd_early.sh\" ./;;\n    hmc                        ) ;;\n    file:*|/*                  ) cp -p \"${__DIRS#*:*//}/script/autoinst_cmd_early.sh\" ./;;\n    *) ;;\n  esac\n  chmod +x ./autoinst_cmd_early.sh\n  ./autoinst_cmd_early.sh\n} | tee -a /var/admin/autoinst/autoinst_cmd_early.sh.log 2>&1\nexit 0\n"
      }
    ],
    "postPartitioning": [
      {
        "name": "zzz_postpartitioning.sh",
        "content": "#!/bin/sh\n_COMD_LINE=\"$(cat /proc/cmdline || true)\"\nfor __LINE in ${_COMD_LINE:-}\ndo\n  case \"${__LINE}\" in\n    debug=*   ) debug=\"${__LINE#debug=}\"   ; export debug;;\n    debugout=*) debugout=\"${__LINE#debug=}\"; export debugout;;\n    *) ;;\n  esac\ndone\n{\n  if [ -n \"${debug:-}\" ] || [ -n \"${debugout:-}\" ]; then\n    set -x\n    export -p\n  fi\n  cd /var/admin/autoinst/ || exit\n  ./autoinst_cmd_part.sh\n} | tee -a /var/admin/autoinst/autoinst_cmd_part.sh.log 2>&1\nexit 0\n"
      }
    ],
    "post": [
      {
        "name": "zzz_post.sh",
        "chroot": false,
        "content": "#!/bin/sh\n_COMD_LINE=\"$(cat /proc/cmdline || true)\"\nfor __LINE in ${_COMD_LINE:-}\ndo\n  case \"${__LINE}\" in\n    debug=*   ) debug=\"${__LINE#debug=}\"   ; export debug;;\n    debugout=*) debugout=\"${__LINE#debug=}\"; export debugout;;\n    *) ;;\n  esac\ndone\n{\n  if [ -n \"${debug:-}\" ] || [ -n \"${debugout:-}\" ]; then\n    set -x\n    export -p\n  fi\n  mkdir -p /mnt/var/admin/\n  mount --bind /var/admin/ /mnt/var/admin/\n  chroot /mnt/ /var/admin/autoinst/autoinst_cmd_late.sh || true\n  umount /mnt/var/admin/ || umount -f /mnt/var/admin/ || umount -l /mnt/var/admin/ || true\n} | tee -a /var/admin/autoinst/autoinst_cmd_late.sh.log 2>&1\n[ -d /mnt/var/admin/. ] && cp -pr /var/admin/* /mnt/var/admin/\nexit 0\n"
      }
    ],
    "init": [
      {
        "name": "zzz_init.sh",
        "content": "#!/bin/sh\n_COMD_LINE=\"$(cat /proc/cmdline || true)\"\nfor __LINE in ${_COMD_LINE:-}\ndo\n  case \"${__LINE}\" in\n    debug=*   ) debug=\"${__LINE#debug=}\"   ; export debug;;\n    debugout=*) debugout=\"${__LINE#debug=}\"; export debugout;;\n    *) ;;\n  esac\ndone\n{\n  if [ -n \"${debug:-}\" ] || [ -n \"${debugout:-}\" ]; then\n    set -x\n    export -p\n  fi\n  cd /var/admin/autoinst/ || exit\n  ./autoinst_cmd_run.sh\n} | tee -a /var/admin/autoinst/autoinst_cmd_run.sh.log 2>&1\n[ -d /mnt/var/admin/. ] && cp -pr /var/admin/* /mnt/var/admin/\nexit 0\n"
      }
    ]
  },
  "software": {
    "patterns": {
      "add": [
        "gnome",
        "base",
        "basesystem",
        "enhanced_base",
        "minimal_base"
      ]
    },
    "packages": [
      "gnome-desktop2",
      "gnome-desktop2-lang",
      "gnome-terminal",
      "gnome-shell",
      "gstreamer-plugins-libav",
      "wireplumber-audio",
      "adwaita-icon-theme",
      "google-noto-sans-jp-fonts",
      "google-noto-serif-jp-fonts",
      "noto-coloremoji-fonts",
      "noto-fonts",
      "gnome-initial-setup",
      "gnome-initial-setup-lang",
      "MozillaFirefox",
      "MozillaThunderbird",
      "audacious",
      "rhythmbox",
      "bluez",
      "epson-inkjet-printer-escpr"
      "lvm2",
      "selinux-policy-targeted",
      "sudo",
      "firewalld",
      "traceroute",
      "NetworkManager",
      "bash-completion",
      "wget",
      "curl",
      "vim",
      "bc",
      "rsync",
      "tree",
      "ShellCheck",
      "clamav",
      "openssh-server",
      "systemd-network",
      "systemd-resolved",
      "systemd-timesyncd",
      "dnsmasq",
      "tftp",
      "bind-utils",
      "apache2",
      "samba",
      "samba-client",
      "cifs-utils",
      "samba-winbind",
      "open-vm-tools",
      "open-vm-tools-desktop",
      "fuse",
      "glibc-i18ndata",
      "glibc-locale",
      "less",
      "which",
      "zypper"
    ],
    "extraRepositories": [
      {
        "alias": "repo-oss",
        "name": "Main Repository",
        "url": "https://download.opensuse.org/distribution/leap/16.0/repo/oss/",
        "productDir": "/",
        "priority": 99
      },
      {
        "alias": "repo-update-oss",
        "name": "Main Update Repository",
        "url": "https://download.opensuse.org/update/leap/16.0/oss/",
        "productDir": "/",
        "priority": 99
      }
    ],
    "onlyRequired": false
  },
  "storage": {
    "drives": [
      {
        "search": {
          "condition": {
            "name": "/dev/nvme0n1"
          },
          "ifNotFound": "error"
        },
        "alias": "pvs-disk",
        "partitions": [
          {
            "search": {
              "ifNotFound": "skip"
            },
            "delete": true
          }
        ]
      }
    ],
    "volumeGroups": [
      {
        "name": "system",
        "physicalVolumes": [
          { "generate": [ "pvs-disk" ] }
        ],
        "logicalVolumes": [
          {
            "filesystem": {
              "path": "/",
              "type": "btrfs"
            },
            "name": "root"
          },
          {
            "filesystem": {
              "path": "swap",
              "type": "swap"
            },
            "name": "swap"
          }
        ]
      }
    ]
  }
}
